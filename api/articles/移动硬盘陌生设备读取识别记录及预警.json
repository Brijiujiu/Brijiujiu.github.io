{"title":"移动硬盘陌生设备读取识别记录及预警","slug":"移动硬盘陌生设备读取识别记录及预警","date":"2020-03-01T06:44:16.000Z","updated":"2020-04-22T10:23:31.186Z","comments":true,"path":"api/articles/移动硬盘陌生设备读取识别记录及预警.json","photos":[],"link":"","excerpt":null,"covers":["https://s2.ax1x.com/2020/03/02/3RiXvV.png","https://s2.ax1x.com/2020/03/02/3RFpE4.png","https://s2.ax1x.com/2020/03/02/3RizbF.png","https://s2.ax1x.com/2020/03/02/3RF9UJ.png"],"content":"<h4 id=\"此文章原提交为32届科技创新技术论文，现发表于博客\"><a href=\"#此文章原提交为32届科技创新技术论文，现发表于博客\" class=\"headerlink\" title=\"此文章原提交为32届科技创新技术论文，现发表于博客\"></a>此文章原提交为32届科技创新技术论文，现发表于博客</h4><h1 id=\"移动硬盘陌生设备读取行为自动记录及预警软件\"><a href=\"#移动硬盘陌生设备读取行为自动记录及预警软件\" class=\"headerlink\" title=\"移动硬盘陌生设备读取行为自动记录及预警软件\"></a>移动硬盘陌生设备读取行为自动记录及预警软件</h1><blockquote>\n<p>该项目提供了一种移动数据硬盘丢失找回的方法，可以达到移动数据储存设备（如U盘等）对丢失后被接入未经允许的Windows设备并进行读取的行为作出记录和预警，以方便失主取得关于丢失硬盘接入设备的相关信息，便于找到移动硬盘。<br>该项目从某些即时通讯软件的异地登陆提醒功能得到启发，结合我自己曾多次丢失移动硬盘的经历，经过反复构思和设计，逐步形成预警软件雏形。</p>\n</blockquote>\n<ul>\n<li><p>软件工作过程简述：<br>当硬盘接入设备时，自动启动硬盘主控芯片内预编译的固件（firmware），运行已编译完成的程序主体，识别计算机信息，对当前用户身份进行识别，并反馈预警信息至主人用户指定邮箱，以便使主人用户及时知晓硬盘的被使用地点、时间、计算机名甚至接入的计算机桌面情况，便于及时找回丢失硬盘。  </p>\n</li>\n<li><p>项目开发过程：<br>最初考虑过完全使用C语言开发，后因python语言的高效、可移植性和可拓展性而选择python语言作为主要开发语言，采用C语言编译主控芯片固件。<br>程序用于储存数据的方式最初为JSON半结构化数据，后考虑到用户本地环境的可读性，转为使用最为广泛的txt文本格式。<br>也曾构思过在程序未成熟的阶段搭建服务器作为信息转发至用户邮箱的中介，后决定采用python的email及smtplib模块实现功能。<br>原本计划采用autorun.inf文件实现在windows系统上的自动运行功能，又因为autorun.inf脚本的易误杀性和不稳定性而使用用硬件辅助实现自动运行功能,在硬件方面先后考虑了attiny85开发板和Leonard开发板，后因免驱动功能实现而选择Leonard开发板。<br>又在识别计算机身份的基础上添加了识别当前用户身份，添加人脸识别以辨别读取操作合法性。  </p>\n</li>\n</ul>\n<ul>\n<li>软件工作过程：<br>当硬盘接入设备时，自动启动硬盘主控芯片内预编译的固件（firmware），与服务器同步软件主体，运行已编译完成的程序主体，识别计算机信息，对当前用户身份进行识别，<br>随后反馈预警信息至移动硬盘失主指定邮箱，以便使主人用户及时知晓硬盘的被使用地点、时间、计算机名及非法读取者的面部照片，便于及时找回丢失硬盘与辨认非法读取者。  </li>\n</ul>\n<ul>\n<li><p>软件工作原理：<br>移动硬盘接入未知设备后，硬盘主控芯片内使用C语言编译的固件将会自动锁定文件路径，通过模拟HID的方式调用windows系统的运行指令，开启开启powershell同步服务器中的软件主体，执行指定路径中python程序编译的exe可执行文件，在本地自动运行并完成身份识别及预警和记录。<br>通过time、socket、platform模块收集时间、设备系统版本等信息，urllib2模块爬虫收集设备公网IP地址等信息。<br>调用opencv、base64等模块进行摄像头的操作、图片的拍摄与编码。<br>调用人脸识别api应用程序接口，实现执行当前读取操作用户的身份与硬盘拥有者身份的对比。<br>使用email、smtplib等模块实现邮件预警的发送功能。  </p>\n</li>\n<li><p>部分语句块：  </p>\n<p>  <img src=\"https://s2.ax1x.com/2020/03/02/3RiXvV.png\" alt=\"应用到的部分python lib\"><br>  <img src=\"https://s2.ax1x.com/2020/03/02/3RivuT.png\" alt=\"用于收集计算机信息的部分语句\"><br>  <img src=\"https://s2.ax1x.com/2020/03/02/3RixDU.png\" alt=\"用于人脸特征对比识别的部分语句\"></p>\n<h3 id=\"运行流程图解\"><a href=\"#运行流程图解\" class=\"headerlink\" title=\"运行流程图解\"></a>运行流程图解</h3><p><img src=\"https://s2.ax1x.com/2020/03/02/3RFpE4.png\" alt=\"运行流程\"></p>\n</li>\n</ul>\n<h3 id=\"硬件形态\"><a href=\"#硬件形态\" class=\"headerlink\" title=\"硬件形态\"></a>硬件形态</h3><p><img src=\"https://s2.ax1x.com/2020/03/02/3RizbF.png\" alt=\"载体硬件形态\"></p>\n<h3 id=\"软件运行演示\"><a href=\"#软件运行演示\" class=\"headerlink\" title=\"软件运行演示\"></a>软件运行演示</h3><p><img src=\"https://s2.ax1x.com/2020/03/02/3RF9UJ.png\" alt=\"运行演示\"></p>\n<blockquote>\n<p>PS：两年前写的python代码，基本没有改动，软件实现很简单，基本是现有库和api的拼凑，关于硬件实现部分还是比较困难的，原本使用windows的dvd自动播放来实现自动运行，好处是可以在任何不做硬件改动的记忆体上部署，但是兼容性实在不行。后来改用u盘固件修改，到现在还没有成功，倒是刷废了一个。项目暂时搁置，直接购买的BadUSB无法携带多余空间储存程序，只能执行键盘操作。如上文所说这其实是一个BadUSB的技术原理。  </p>\n<p>但是我一直信奉一句话，技术无罪<br>附Github项目开源链接：<br><a href=\"https://github.com/Dabrit/Moveable_Disk-Guard\">https://github.com/Dabrit/Moveable_Disk-Guard</a></p>\n</blockquote>\n","categories":[{"name":"文章","slug":"文章","count":5,"path":"api/categories/文章.json"}],"tags":[{"name":"论文","slug":"论文","count":1,"path":"api/tags/论文.json"}]}