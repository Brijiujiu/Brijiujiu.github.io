{"name":"trojan代理搭建","slug":"trojan代理搭建","count":1,"postlist":[{"title":"trojan代理从搭建到应用","slug":"Azure搭建trojan代理过程","date":"2020-04-01T10:44:13.000Z","updated":"2020-05-07T17:52:47.815Z","comments":true,"path":"api/articles/Azure搭建trojan代理过程.json","excerpt":"","keywords":null,"cover":"https://s1.ax1x.com/2020/04/01/G8pcrj.png","content":"<h3 id=\"事先声明：本人对trojan及此类型软件的拓展使用方法一概不知，爱国爱党。\"><a href=\"#事先声明：本人对trojan及此类型软件的拓展使用方法一概不知，爱国爱党。\" class=\"headerlink\" title=\"事先声明：本人对trojan及此类型软件的拓展使用方法一概不知，爱国爱党。\"></a>事先声明：本人对trojan及此类型软件的拓展使用方法一概不知，爱国爱党。</h3><h4 id=\"请勿作非法用途\"><a href=\"#请勿作非法用途\" class=\"headerlink\" title=\"请勿作非法用途\"></a><em>请勿作非法用途</em></h4><blockquote>\n<p>众所周知，一般来说，基于解决为适应我国国情而做出的部分国际互联网限制所导致的学术信息交流不方便等问题而提出的大多数加密流量型代理协议(SS/SSR等)已经不再稳定和安全，众多网友迫切地寻找一款真正能够满足日常需求的代理软件。于是，<strong>v2ray</strong>以及<strong>Trojan</strong>就应运而生。二者都是伪装流量类型的代理方式。<br><a href=\"https://github.com/trojan-gfw/trojan\">Trojan in github</a>  </p>\n</blockquote>\n<ul>\n<li>v2ray是完整的网络框架，对服务器及用户的资源占用是比较大的。但是使用比较广泛。</li>\n<li>trojan可以说是v2ray的简化版，由于使用C++编写以及简化了一层加密，理论速度会比v2ray高，负载也较小。但是<strong>Trojan不能套接CDN加速</strong>。</li>\n</ul>\n<p>本文主要讲述trojan在Azure服务器的安装过程。</p>\n<h3 id=\"一、搞到一台VPS\"><a href=\"#一、搞到一台VPS\" class=\"headerlink\" title=\"一、搞到一台VPS\"></a>一、搞到一台VPS</h3><p>文中采用Azure的日本东部免费订阅，Ubuntu服务器作为示例。  </p>\n<p><strong>服务器必须开放80及443端口</strong>  </p>\n<p>方法自查。</p>\n<h3 id=\"二、DNS解析配置\"><a href=\"#二、DNS解析配置\" class=\"headerlink\" title=\"二、DNS解析配置\"></a>二、DNS解析配置</h3><p>推荐Cloudflare，<strong>不要使用VPS自带的dns</strong>  </p>\n<p>在cloudflare填写配置完成后需要几个小时才能生效，判定方法为ping出的ip是否为服务器ip。  </p>\n<h3 id=\"三、开始配置服务端\"><a href=\"#三、开始配置服务端\" class=\"headerlink\" title=\"三、开始配置服务端\"></a>三、开始配置服务端</h3><ol>\n<li><p>使用SSH连接服务器，以root用户登录</p>\n</li>\n<li><p>注册SSL证书，如果已经有证书可以跳过这步。  </p>\n<ol>\n<li><code>apt update&amp;&amp;apt upgrade&amp;&amp;apt install certbot</code></li>\n<li><code>certbot certonly --standalone -d [你的域名]</code></li>\n<li>按照提示填写信息即可。</li>\n</ol>\n</li>\n<li><p>完成生成SSL证书后，可运行<code>certbot certificates</code> 来获取证书路径，分别有两个pem文件。  </p>\n</li>\n<li><p><code>bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/trojan-gfw/trojan-quickstart/master/trojan-quickstart.sh)&quot;</code></p>\n</li>\n<li><p><code>apt install nginx</code>  <em>此为安装nginx框架搭建伪装网页</em>  </p>\n</li>\n<li><p>配置Trojan：<code> vim /usr/local/etc/trojan/config.json</code>  </p>\n<p>按i编辑<code>&quot;password&quot;:</code>中的两个密码，默认使用第一个。接着修改<code>cert</code>和<code>key</code>,分别填入ssl证书（pem文件）的绝对路径。  </p>\n<p>完成后<code>ESC</code>后<code>：wq</code>保存退出。</p>\n</li>\n</ol>\n<ol start=\"7\">\n<li>就此安装完成，接下来配置开机自启及启动  </li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable trojan&amp;&amp;systemctl enable nginx&amp;&amp;systemctl start trojan&amp;&amp;systemctl start nginx</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"以上服务端配置完成，可ss-lp-grep-trojan检测运行状况，有输出即正常，无输出检查步骤。\"><a href=\"#以上服务端配置完成，可ss-lp-grep-trojan检测运行状况，有输出即正常，无输出检查步骤。\" class=\"headerlink\" title=\"以上服务端配置完成，可ss -lp | grep trojan检测运行状况，有输出即正常，无输出检查步骤。\"></a>以上服务端配置完成，可<code>ss -lp | grep trojan</code>检测运行状况，有输出即正常，无输出检查步骤。</h3><h3 id=\"四、客户端配置\"><a href=\"#四、客户端配置\" class=\"headerlink\" title=\"四、客户端配置\"></a>四、客户端配置</h3><p>windows可使用trojan.exe或clash、V2rayN，linux参考windows。Mac未知可自行查询。<br>路由器多数第三方固件可使用三月中旬后更新的clash。</p>\n<p>clash配置参考（第102、104、106、128、130、132修改为自己的参数，其它依用户水平自己调整。）：<br><a href=\"https://raw.githubusercontent.com/Dabrit/LinkFiles/master/clash.yaml\">https://raw.githubusercontent.com/Dabrit/LinkFiles/master/clash.yaml</a>  </p>\n<p>复制后保存为yml文件就可以拖动至clash使用，或者直接复制进路由器clash配置。<br><a href=\"https://github.com/Dreamacro/clash\">Clash for windows</a></p>\n<p>整个头图最后。<br><img src=\"https://s1.ax1x.com/2020/04/01/G8pcrj.png\" alt=\"头图\">  </p>\n<p>本文完结。<br>2020.4.1.19:35 latest edit</p>\n","text":"事先声明：本人对trojan及此类型软件的拓展使用方法一概不知，爱国爱党。请勿作非法用途众所周知，一般来说，基于解决为适应我国国情而做出的部分国际互联网限制所导致的学术信息交流不方便等问题而提出的大多数加密流量型代理协议(SS/SSR等)已经不再稳定和安全，众多网友迫切地寻找一款","link":"","raw":null,"photos":[],"categories":[{"name":"记录-备忘","slug":"记录-备忘","count":4,"path":"api/categories/记录-备忘.json"}],"tags":[{"name":"trojan代理搭建","slug":"trojan代理搭建","count":1,"path":"api/tags/trojan代理搭建.json"}]}]}